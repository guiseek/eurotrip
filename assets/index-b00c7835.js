var D=Object.defineProperty;var W=(r,t,e)=>t in r?D(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var f=(r,t,e)=>(W(r,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();function L(r,t){return(t??document).querySelector(r)}function U(r,t){return(t??document).querySelectorAll(r)}const m=new Map;function P(r){if(m.has(r))return m.get(r);const t=r.length;let e=0,n=0,o=0;const s=[];for(let i=0;i<t;i+=1){const c=r[i],a=r[i+1],h=r[i-1];c==="{"&&a==="{"&&h!=="\\"?(o+=1,o===1&&(n=i),i+=1):c==="}"&&a==="}"&&h!=="\\"&&o&&(o-=1,o===0&&(n>e&&(s.push(Object.freeze({type:"string",start:e,end:n,value:r.slice(e,n)})),e=n),s.push(Object.freeze({type:"part",start:n,end:i+2,value:r.slice(e+2,i).trim()})),i+=1,e=i+1))}return e<t&&s.push(Object.freeze({type:"string",start:e,end:t,value:r.slice(e,t)})),m.set(r,Object.freeze(s)),m.get(r)}const p=new WeakMap,N=new WeakMap;class V{constructor(t,e){this.expression=e,p.set(this,t),t.updateParent("")}get attributeName(){return p.get(this).attr.name}get attributeNamespace(){return p.get(this).attr.namespaceURI}get value(){return N.get(this)}set value(t){N.set(this,t||""),p.get(this).updateParent(t)}get element(){return p.get(this).element}get booleanValue(){return p.get(this).booleanValue}set booleanValue(t){p.get(this).booleanValue=t}}class z{constructor(t,e){f(this,"partList",[]);this.element=t,this.attr=e}get booleanValue(){return this.element.hasAttributeNS(this.attr.namespaceURI,this.attr.name)}set booleanValue(t){if(this.partList.length!==1)throw new DOMException("Operation not supported","NotSupportedError");this.partList[0].value=t?"":null}append(t){this.partList.push(t)}updateParent(t){if(this.partList.length===1&&t===null)this.element.removeAttributeNS(this.attr.namespaceURI,this.attr.name);else{const e=this.partList.map(n=>typeof n=="string"?n:n.value).join("");this.element.setAttributeNS(this.attr.namespaceURI,this.attr.name,e)}}}const u=new WeakMap;class F{constructor(t,e){this.expression=e,u.set(this,[t]),t.textContent=""}get value(){return u.get(this).map(t=>t.textContent).join("")}set value(t){this.replace(t)}get previousSibling(){return u.get(this)[0].previousSibling}get nextSibling(){return u.get(this)[u.get(this).length-1].nextSibling}replace(...t){const e=t.map(n=>typeof n=="string"?new Text(n):n);e.length||e.push(new Text("")),u.get(this)[0].before(...e);for(const n of u.get(this))n.remove();u.set(this,e)}}function H(r){return{processCallback(t,e,n){if(!(typeof n!="object"||!n)){for(const o of e)if(o.expression in n){const s=n[o.expression]??"";r(o,s)}}}}}function B(r,t){r.value=String(t)}const _=H(B);function*K(r){const t=r.ownerDocument.createTreeWalker(r,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null);let e;for(;e=t.nextNode();)if(e instanceof Element&&e.hasAttributes())for(let n=0;n<e.attributes.length;n+=1){const o=e.attributes.item(n);if(o&&o.value.includes("{{")){const s=new z(e,o);for(const i of P(o.value))if(i.type==="string")s.append(i.value);else{const c=new V(s,i.value);s.append(c),yield c}}}else if(e instanceof Text&&e.textContent&&e.textContent.includes("{{")){const n=P(e.textContent);for(let o=0;o<n.length;o+=1){const s=n[o];s.end<e.textContent.length&&e.splitText(s.end),s.type==="part"&&(yield new F(e,s.value));break}}}const k=new WeakMap,A=new WeakMap;class g extends DocumentFragment{constructor(t,e,n=_){var i;super(),Object.getPrototypeOf(this)!==g.prototype&&Object.setPrototypeOf(this,g.prototype),this.appendChild(t.content.cloneNode(!0)),A.set(this,Array.from(K(this))),k.set(this,n);const o=k.get(this),s=A.get(this);o&&s&&((i=o.createCallback)==null||i.call(o,this,s,e),o.processCallback(this,s,e))}update(t){const e=k.get(this),n=A.get(this);e&&n&&e.processCallback(this,n,t)}}const S=r=>(t,e)=>{const n=r.get(t);n.active.tabIndex=-1,n.active=e,n.active.tabIndex=0,n.active.focus()},M=r=>t=>{const e=t.currentTarget;if(r.get("last_scroller")!==e&&r.has(e)){const o=r.get(e);S(r)(e,o.active),r.set("last_scroller",e)}},Q=r=>t=>{const e=r.get(t);e.index-=1,e.index<1&&(e.index=0);let n=e.targets[e.index];n&&S(r)(t,n)},X=r=>t=>{const e=r.get(t);e.index+=1,e.index>e.targets.length-1&&(e.index=e.targets.length-1);let n=e.targets[e.index];n&&S(r)(t,n)};var d=(r=>(r.ArrowLeft="ArrowLeft",r.ArrowUp="ArrowUp",r.ArrowRight="ArrowRight",r.ArrowDown="ArrowDown",r))(d||{});const $=getComputedStyle(document.documentElement),C=$.direction==="rtl",T=r=>t=>{const e=t.currentTarget;switch(console.log(t),t.key){case d[C?"ArrowLeft":"ArrowRight"]:case d.ArrowDown:{t.preventDefault(),X(r)(e);break}case d[C?"ArrowRight":"ArrowLeft"]:case d.ArrowUp:{t.preventDefault(),Q(r)(e);break}}},G=r=>{const t=new MutationObserver(e=>{e.filter(n=>n.removedNodes.length>0).forEach(n=>{Array.from(n.removedNodes).filter(o=>o.nodeType===1).forEach(o=>{r.forEach((s,i)=>{if(i==="last_scroller")return;const c=i,a=s;if(o.contains(c)){c.removeEventListener("focusin",M(r)),c.removeEventListener("keydown",T(r)),r.delete(c),a.targets.forEach(x=>x.tabIndex=0);const h=r.size===0,w=r.size===1&&r.has("last_scroller");(h||w)&&(r.clear(),t.disconnect())}})})})});return t},y=new Map,J=({element:r,target:t})=>{const e=t||":scope *",n=r.querySelectorAll(e),[o]=Array.from(n);r.tabIndex=-1,n.forEach(s=>s.tabIndex=-1),o.tabIndex=0,y.set(r,{targets:n,active:o,index:0}),r.addEventListener("focusin",M(y)),r.addEventListener("keydown",T(y)),G(y).observe(document,{childList:!0,subtree:!0})};const b=class extends HTMLButtonElement{constructor(){super(...arguments);f(this,"colorScheme",matchMedia("(prefers-color-scheme: dark)"));f(this,"theme",{value:this.getColorPreference()});f(this,"document",window.document)}connectedCallback(){this.classList.add("theme-toggle"),this.title="Toggles light & dark",this.ariaLive="polite",this.ariaLabel="auto",this.innerHTML=`
      <svg
        class="sun-and-moon"
        aria-hidden="true"
        width="24"
        height="24"
        viewBox="0 0 24 24"
      >
        <mask class="moon" id="moon-mask">
          <rect x="0" y="0" width="100%" height="100%" fill="white" />
          <circle cx="24" cy="10" r="6" fill="black" />
        </mask>
        <circle
          class="sun"
          cx="12"
          cy="12"
          r="6"
          mask="url(#moon-mask)"
          fill="currentColor"
        />
        <g class="sun-beams" stroke="currentColor">
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </g>
      </svg>
    `,this.reflectPreference(),this.colorScheme.addEventListener("change",({matches:e})=>{this.theme.value=e?"darkk":"light",this.setPreference()}),this.onclick=this.onClick}getColorPreference(){const e=b.storageKey,n=localStorage.getItem(e);return n||(this.colorScheme.matches?"dark":"light")}reflectPreference(){const e=this.document.firstElementChild,n=this.document.querySelector("#theme-toggle");e==null||e.setAttribute("data-theme",this.theme.value),n==null||n.setAttribute("aria-label",this.theme.value)}setPreference(){const e=b.storageKey;localStorage.setItem(e,this.theme.value),this.reflectPreference()}onClick(){this.theme.value=this.theme.value==="light"?"dark":"light",this.setPreference()}};let v=b;f(v,"storageKey","theme-preference");customElements.define("et-theme",v,{extends:"button"});const O=L("template#section"),I=L("template#photo"),l=L("dialog#viewer"),Y=()=>fetch("./photos.json").then(r=>r.json());O&&I&&l&&Y().then(r=>{r.forEach(i=>{const c=i.name.replace("photos/",""),a=new g(O,{name:c});i.contents.forEach(h=>{const[,,w,x]=h.name.split("/"),j=x.replace(".webp",""),R={...h,alt:w,caption:j},q=new g(I,R),E=a.querySelector("ul");E&&E.appendChild(q)}),document.body.appendChild(a)});const t="a";U("ul.scroller").forEach(i=>J({element:i,target:t}));const e=()=>{location.hash="",l.close()};onkeydown=i=>{const c=l.open,a=i.key==="Escape";c&&a&&e()};const n=({target:i})=>{i===l&&e()};l.addEventListener("click",n);const o=l.querySelector("img"),s=()=>{location.hash?(o.src=location.hash.replace("#",""),l.showModal()):l.open&&l.close()};s(),onhashchange=s});
