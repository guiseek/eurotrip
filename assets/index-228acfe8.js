var R=Object.defineProperty;var q=(r,e,t)=>e in r?R(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var d=(r,e,t)=>(q(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();var x=(r=>(r.ArrowLeft="ArrowLeft",r.ArrowUp="ArrowUp",r.ArrowRight="ArrowRight",r.ArrowDown="ArrowDown",r))(x||{});const a=new Map,W=getComputedStyle(document.documentElement),S=W.direction==="rtl",U=r=>{const e=a.get(r);e.index+=1,e.index>e.targets.length-1&&(e.index=e.targets.length-1);let t=e.targets[e.index];t&&k(r,t)},V=r=>{const e=a.get(r);e.index-=1,e.index<1&&(e.index=0);let t=e.targets[e.index];t&&k(r,t)},k=(r,e)=>{const t=a.get(r);t.active.tabIndex=-1,t.active=e,t.active.tabIndex=0,t.active.focus()},I=r=>{const e=r.currentTarget;if(a.get("last_rover")!==e&&a.has(e)){const n=a.get(e);k(e,n.active),a.set("last_rover",e)}},M=r=>{const e=r.currentTarget;switch(console.log(r),r.key){case x[S?"ArrowLeft":"ArrowRight"]:case"ArrowDown":{r.preventDefault(),U(e);break}case x[S?"ArrowRight":"ArrowLeft"]:case"ArrowUp":{r.preventDefault(),V(e);break}}},T=new MutationObserver(r=>{r.filter(e=>e.removedNodes.length>0).forEach(e=>{Array.from(e.removedNodes).filter(t=>t.nodeType===1).forEach(t=>{a.forEach((n,s)=>{if(s==="last_rover")return;const o=s,i=n;if(t.contains(o)){o.removeEventListener("focusin",I),o.removeEventListener("keydown",M),a.delete(o),i.targets.forEach(f=>f.tabIndex=0);const c=a.size===0,p=a.size===1&&a.has("last_rover");(c||p)&&(a.clear(),T.disconnect())}})})})}),z=({element:r,target:e})=>{const t=e||":scope *",n=r.querySelectorAll(t),[s]=Array.from(n);r.tabIndex=-1,n.forEach(o=>o.tabIndex=-1),s.tabIndex=0,a.set(r,{targets:n,active:s,index:0}),r.addEventListener("focusin",I),r.addEventListener("keydown",M),T.observe(document,{childList:!0,subtree:!0})},m=new Map;function E(r){if(m.has(r))return m.get(r);const e=r.length;let t=0,n=0,s=0;const o=[];for(let i=0;i<e;i+=1){const c=r[i],p=r[i+1],f=r[i-1];c==="{"&&p==="{"&&f!=="\\"?(s+=1,s===1&&(n=i),i+=1):c==="}"&&p==="}"&&f!=="\\"&&s&&(s-=1,s===0&&(n>t&&(o.push(Object.freeze({type:"string",start:t,end:n,value:r.slice(t,n)})),t=n),o.push(Object.freeze({type:"part",start:n,end:i+2,value:r.slice(t+2,i).trim()})),i+=1,t=i+1))}return t<e&&o.push(Object.freeze({type:"string",start:t,end:e,value:r.slice(t,e)})),m.set(r,Object.freeze(o)),m.get(r)}const u=new WeakMap,P=new WeakMap;class F{constructor(e,t){this.expression=t,u.set(this,e),e.updateParent("")}get attributeName(){return u.get(this).attr.name}get attributeNamespace(){return u.get(this).attr.namespaceURI}get value(){return P.get(this)}set value(e){P.set(this,e||""),u.get(this).updateParent(e)}get element(){return u.get(this).element}get booleanValue(){return u.get(this).booleanValue}set booleanValue(e){u.get(this).booleanValue=e}}class H{constructor(e,t){d(this,"partList",[]);this.element=e,this.attr=t}get booleanValue(){return this.element.hasAttributeNS(this.attr.namespaceURI,this.attr.name)}set booleanValue(e){if(this.partList.length!==1)throw new DOMException("Operation not supported","NotSupportedError");this.partList[0].value=e?"":null}append(e){this.partList.push(e)}updateParent(e){if(this.partList.length===1&&e===null)this.element.removeAttributeNS(this.attr.namespaceURI,this.attr.name);else{const t=this.partList.map(n=>typeof n=="string"?n:n.value).join("");this.element.setAttributeNS(this.attr.namespaceURI,this.attr.name,t)}}}const l=new WeakMap;class B{constructor(e,t){this.expression=t,l.set(this,[e]),e.textContent=""}get value(){return l.get(this).map(e=>e.textContent).join("")}set value(e){this.replace(e)}get previousSibling(){return l.get(this)[0].previousSibling}get nextSibling(){return l.get(this)[l.get(this).length-1].nextSibling}replace(...e){const t=e.map(n=>typeof n=="string"?new Text(n):n);t.length||t.push(new Text("")),l.get(this)[0].before(...t);for(const n of l.get(this))n.remove();l.set(this,t)}}function _(r){return{processCallback(e,t,n){if(!(typeof n!="object"||!n)){for(const s of t)if(s.expression in n){const o=n[s.expression]??"";r(s,o)}}}}}function K(r,e){r.value=String(e)}const $=_(K);function*Q(r){const e=r.ownerDocument.createTreeWalker(r,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null);let t;for(;t=e.nextNode();)if(t instanceof Element&&t.hasAttributes())for(let n=0;n<t.attributes.length;n+=1){const s=t.attributes.item(n);if(s&&s.value.includes("{{")){const o=new H(t,s);for(const i of E(s.value))if(i.type==="string")o.append(i.value);else{const c=new F(o,i.value);o.append(c),yield c}}}else if(t instanceof Text&&t.textContent&&t.textContent.includes("{{")){const n=E(t.textContent);for(let s=0;s<n.length;s+=1){const o=n[s];o.end<t.textContent.length&&t.splitText(o.end),o.type==="part"&&(yield new B(t,o.value));break}}}const b=new WeakMap,w=new WeakMap;class g extends DocumentFragment{constructor(e,t,n=$){var i;super(),Object.getPrototypeOf(this)!==g.prototype&&Object.setPrototypeOf(this,g.prototype),this.appendChild(e.content.cloneNode(!0)),w.set(this,Array.from(Q(this))),b.set(this,n);const s=b.get(this),o=w.get(this);s&&o&&((i=s.createCallback)==null||i.call(s,this,o,t),s.processCallback(this,o,t))}update(e){const t=b.get(this),n=w.get(this);t&&n&&t.processCallback(this,n,e)}}function A(r,e){return(e??document).querySelector(r)}function C(r,e){return(e??document).querySelectorAll(r)}const X=document.createElement("template");X.innerHTML=`
      
      `;const v=class extends HTMLButtonElement{constructor(){super(...arguments);d(this,"colorScheme",matchMedia("(prefers-color-scheme: dark)"));d(this,"theme",{value:this.getColorPreference()});d(this,"document",window.document)}connectedCallback(){this.classList.add("theme-toggle"),this.title="Toggles light & dark",this.ariaLive="polite",this.ariaLabel="auto",this.innerHTML=`
      <svg
        class="sun-and-moon"
        aria-hidden="true"
        width="24"
        height="24"
        viewBox="0 0 24 24"
      >
        <mask class="moon" id="moon-mask">
          <rect x="0" y="0" width="100%" height="100%" fill="white" />
          <circle cx="24" cy="10" r="6" fill="black" />
        </mask>
        <circle
          class="sun"
          cx="12"
          cy="12"
          r="6"
          mask="url(#moon-mask)"
          fill="currentColor"
        />
        <g class="sun-beams" stroke="currentColor">
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </g>
      </svg>
    `,this.reflectPreference(),this.colorScheme.addEventListener("change",({matches:t})=>{this.theme.value=t?"darkk":"light",this.setPreference()}),this.onclick=this.onClick}getColorPreference(){const t=v.storageKey,n=localStorage.getItem(t);return n||(this.colorScheme.matches?"dark":"light")}reflectPreference(){const t=this.document.firstElementChild,n=this.document.querySelector("#theme-toggle");t==null||t.setAttribute("data-theme",this.theme.value),n==null||n.setAttribute("aria-label",this.theme.value)}setPreference(){const t=v.storageKey;localStorage.setItem(t,this.theme.value),this.reflectPreference()}onClick(){this.theme.value=this.theme.value==="light"?"dark":"light",this.setPreference()}};let y=v;d(y,"storageKey","theme-preference");customElements.define("et-theme",y,{extends:"button"});const N=A("template#section"),O=A("template#photo"),h=A("dialog#viewer"),G=()=>fetch("./photos.json").then(r=>r.json());N&&O&&h&&G().then(r=>{r.forEach(n=>{const s=n.name.replace("photos/",""),o=new g(N,{name:s});n.contents.forEach(i=>{const[,,c,p]=i.name.split("/"),f=p.replace(".webp",""),j={...i,alt:c,caption:f},D=new g(O,j),L=o.querySelector("ul");L&&L.appendChild(D)}),document.body.appendChild(o)}),C("ul.media-scroller").forEach(n=>z({element:n,target:"a"}));const e=()=>{location.hash="",h.close()},t=({target:n})=>{n===h&&e()};h.addEventListener("click",t),onkeydown=n=>{h.open&&n.key==="Escape"&&e()},C("ul.media-scroller a").forEach(n=>{const s=`#${n.href.replace(location.origin,"")}`;n.onclick=o=>{o.preventDefault();const i=h.querySelector("img");i&&(i.src=n.href),h.showModal(),location.replace(s)},location.hash===s&&n.click()})});
