var V=Object.defineProperty;var W=(n,t,e)=>t in n?V(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var p=(n,t,e)=>(W(n,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=e(o);fetch(o.href,r)}})();function k(n,t){return(t??document).querySelector(n)}function I(n,t){return(t??document).querySelectorAll(n)}const y=new Map;function P(n){if(y.has(n))return y.get(n);const t=n.length;let e=0,s=0,o=0;const r=[];for(let i=0;i<t;i+=1){const a=n[i],c=n[i+1],u=n[i-1];a==="{"&&c==="{"&&u!=="\\"?(o+=1,o===1&&(s=i),i+=1):a==="}"&&c==="}"&&u!=="\\"&&o&&(o-=1,o===0&&(s>e&&(r.push(Object.freeze({type:"string",start:e,end:s,value:n.slice(e,s)})),e=s),r.push(Object.freeze({type:"part",start:s,end:i+2,value:n.slice(e+2,i).trim()})),i+=1,e=i+1))}return e<t&&r.push(Object.freeze({type:"string",start:e,end:t,value:n.slice(e,t)})),y.set(n,Object.freeze(r)),y.get(n)}const d=new WeakMap,C=new WeakMap;class U{constructor(t,e){this.expression=e,d.set(this,t),t.updateParent("")}get attributeName(){return d.get(this).attr.name}get attributeNamespace(){return d.get(this).attr.namespaceURI}get value(){return C.get(this)}set value(t){C.set(this,t||""),d.get(this).updateParent(t)}get element(){return d.get(this).element}get booleanValue(){return d.get(this).booleanValue}set booleanValue(t){d.get(this).booleanValue=t}}class H{constructor(t,e){p(this,"partList",[]);this.element=t,this.attr=e}get booleanValue(){return this.element.hasAttributeNS(this.attr.namespaceURI,this.attr.name)}set booleanValue(t){if(this.partList.length!==1)throw new DOMException("Operation not supported","NotSupportedError");this.partList[0].value=t?"":null}append(t){this.partList.push(t)}updateParent(t){if(this.partList.length===1&&t===null)this.element.removeAttributeNS(this.attr.namespaceURI,this.attr.name);else{const e=this.partList.map(s=>typeof s=="string"?s:s.value).join("");this.element.setAttributeNS(this.attr.namespaceURI,this.attr.name,e)}}}const h=new WeakMap;class F{constructor(t,e){this.expression=e,h.set(this,[t]),t.textContent=""}get value(){return h.get(this).map(t=>t.textContent).join("")}set value(t){this.replace(t)}get previousSibling(){return h.get(this)[0].previousSibling}get nextSibling(){return h.get(this)[h.get(this).length-1].nextSibling}replace(...t){const e=t.map(s=>typeof s=="string"?new Text(s):s);e.length||e.push(new Text("")),h.get(this)[0].before(...e);for(const s of h.get(this))s.remove();h.set(this,e)}}function B(n){return{processCallback(t,e,s){if(!(typeof s!="object"||!s)){for(const o of e)if(o.expression in s){const r=s[o.expression]??"";n(o,r)}}}}}function $(n,t){n.value=String(t)}const K=B($);function*_(n){const t=n.ownerDocument.createTreeWalker(n,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null);let e;for(;e=t.nextNode();)if(e instanceof Element&&e.hasAttributes())for(let s=0;s<e.attributes.length;s+=1){const o=e.attributes.item(s);if(o&&o.value.includes("{{")){const r=new H(e,o);for(const i of P(o.value))if(i.type==="string")r.append(i.value);else{const a=new U(r,i.value);r.append(a),yield a}}}else if(e instanceof Text&&e.textContent&&e.textContent.includes("{{")){const s=P(e.textContent);for(let o=0;o<s.length;o+=1){const r=s[o];r.end<e.textContent.length&&e.splitText(r.end),r.type==="part"&&(yield new F(e,r.value));break}}}const A=new WeakMap,L=new WeakMap;class m extends DocumentFragment{constructor(t,e,s=K){var i;super(),Object.getPrototypeOf(this)!==m.prototype&&Object.setPrototypeOf(this,m.prototype),this.appendChild(t.content.cloneNode(!0)),L.set(this,Array.from(_(this))),A.set(this,s);const o=A.get(this),r=L.get(this);o&&r&&((i=o.createCallback)==null||i.call(o,this,r,e),o.processCallback(this,r,e))}update(t){const e=A.get(this),s=L.get(this);e&&s&&e.processCallback(this,s,t)}}const S=n=>(t,e)=>{const s=n.get(t);s.active.tabIndex=-1,s.active=e,s.active.tabIndex=0,s.active.focus()},T=n=>t=>{const e=t.currentTarget;if(n.get("last_scroller")!==e&&n.has(e)){const o=n.get(e);S(n)(e,o.active),n.set("last_scroller",e)}},Q=n=>t=>{const e=n.get(t);e.index-=1,e.index<1&&(e.index=0);let s=e.targets[e.index];s&&S(n)(t,s)},X=n=>t=>{const e=n.get(t);e.index+=1,e.index>e.targets.length-1&&(e.index=e.targets.length-1);let s=e.targets[e.index];s&&S(n)(t,s)};var f=(n=>(n.ArrowLeft="ArrowLeft",n.ArrowUp="ArrowUp",n.ArrowRight="ArrowRight",n.ArrowDown="ArrowDown",n))(f||{});const G=getComputedStyle(document.documentElement),M=G.direction==="rtl",j=n=>t=>{const e=t.currentTarget;switch(console.log(t),t.key){case f[M?"ArrowLeft":"ArrowRight"]:case f.ArrowDown:{t.preventDefault(),X(n)(e);break}case f[M?"ArrowRight":"ArrowLeft"]:case f.ArrowUp:{t.preventDefault(),Q(n)(e);break}}},J=n=>{const t=new MutationObserver(e=>{e.filter(s=>s.removedNodes.length>0).forEach(s=>{Array.from(s.removedNodes).filter(o=>o.nodeType===1).forEach(o=>{n.forEach((r,i)=>{if(i==="last_scroller")return;const a=i,c=r;if(o.contains(a)){a.removeEventListener("focusin",T(n)),a.removeEventListener("keydown",j(n)),n.delete(a),c.targets.forEach(E=>E.tabIndex=0);const u=n.size===0,g=n.size===1&&n.has("last_scroller");(u||g)&&(n.clear(),t.disconnect())}})})})});return t},v=new Map,Y=({element:n,target:t})=>{const e=t||":scope *",s=n.querySelectorAll(e),[o]=Array.from(s);n.tabIndex=-1,s.forEach(r=>r.tabIndex=-1),o.tabIndex=0,v.set(n,{targets:s,active:o,index:0}),n.addEventListener("focusin",T(v)),n.addEventListener("keydown",j(v)),J(v).observe(document,{childList:!0,subtree:!0})};const x=class extends HTMLButtonElement{constructor(){super(...arguments);p(this,"colorScheme",matchMedia("(prefers-color-scheme: dark)"));p(this,"theme",{value:this.getColorPreference()});p(this,"document",window.document)}connectedCallback(){this.classList.add("theme-toggle"),this.title="Toggles light & dark",this.ariaLive="polite",this.ariaLabel="auto",this.innerHTML=`
      <svg
        class="sun-and-moon"
        aria-hidden="true"
        width="24"
        height="24"
        viewBox="0 0 24 24"
      >
        <mask class="moon" id="moon-mask">
          <rect x="0" y="0" width="100%" height="100%" fill="white" />
          <circle cx="24" cy="10" r="6" fill="black" />
        </mask>
        <circle
          class="sun"
          cx="12"
          cy="12"
          r="6"
          mask="url(#moon-mask)"
          fill="currentColor"
        />
        <g class="sun-beams" stroke="currentColor">
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </g>
      </svg>
    `,this.reflectPreference(),this.colorScheme.addEventListener("change",({matches:e})=>{this.theme.value=e?"darkk":"light",this.setPreference()}),this.onclick=this.onClick}getColorPreference(){const e=x.storageKey,s=localStorage.getItem(e);return s||(this.colorScheme.matches?"dark":"light")}reflectPreference(){const e=this.document.firstElementChild,s=this.document.querySelector("#theme-toggle");e==null||e.setAttribute("data-theme",this.theme.value),s==null||s.setAttribute("aria-label",this.theme.value)}setPreference(){const e=x.storageKey;localStorage.setItem(e,this.theme.value),this.reflectPreference()}onClick(){this.theme.value=this.theme.value==="light"?"dark":"light",this.setPreference()}};let w=x;p(w,"storageKey","theme-preference");customElements.define("et-theme",w,{extends:"button"});class Z extends HTMLMenuElement{connectedCallback(){this.innerHTML=`
      <li><button value="sampa">sampa</button></li>
      <li><button value="paris">paris</button></li>
      <li><button value="italy">italy</button></li>
      <li><button value="switzerland">switzerland</button></li>
      <li><button value="austria">austria</button></li>
    `;const{matches:t}=matchMedia("(prefers-reduced-motion: no-preference)");t&&(onmousemove=({clientX:e,clientY:s})=>{const{dx:o,dy:r}=this.getAngles(e,s);this.style.setProperty("--x",`${r/20}deg`),this.style.setProperty("--y",`${o/20}deg`)}),I("button",this).forEach(e=>{e.onclick=async()=>{e.classList.add("puff-out-center"),this.fetchPhotos(e.value).then(r=>{this.emitActivated(e.value,r)});const s=Promise.allSettled(e.getAnimations().map(r=>r.finished)),o=e.parentElement;s.then(()=>{this.emitAnimationEnd(),o==null||o.remove()})}})}async fetchPhotos(t){return await fetch(`./photos/${t}.json`).then(e=>e.json())}emitActivated(t,e){const s={detail:{name:t,photos:e}};this.dispatchEvent(new CustomEvent("activated",s))}emitAnimationEnd(){this.dispatchEvent(new CustomEvent("animationEnd"))}handleClick(){}getAngles(t,e){const{x:s,y:o,width:r,height:i}=this.getBoundingClientRect(),a=t-(s+.5*r),c=e-(o+.5*i);return{dx:a,dy:c}}}customElements.define("et-menu",Z,{extends:"menu"});const N=k("template#section"),O=k("template#photo"),l=k("dialog#viewer"),b=k('menu[is="et-menu"]');if(N&&O&&l&&b){console.log(b),b.addEventListener("activated",({detail:r})=>{console.log(r);const{name:i,photos:a}=r,c=new m(N,{name:i}),u=c.querySelector("ul");a.forEach(g=>{const[,,E,R]=g.name.split("/"),q=R.replace(".webp",""),D={...g,alt:E,caption:q},z=new m(O,D);u&&u.appendChild(z)}),b.addEventListener("animationEnd",()=>{u.scrollIntoView({behavior:"smooth"})}),document.body.appendChild(c)});const n="a";I("ul.scroller").forEach(r=>Y({element:r,target:n}));const t=()=>{location.hash="",l.close()};onkeydown=r=>{const i=l.open,a=r.key==="Escape";i&&a&&t()};const e=({target:r})=>{r===l&&t()};l.addEventListener("click",e);const s=l.querySelector("img"),o=()=>{location.hash?(s.src=location.hash.replace("#",""),l.showModal()):l.open&&l.close()};o(),onhashchange=o}
