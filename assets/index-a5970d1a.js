var R=Object.defineProperty;var q=(r,t,e)=>t in r?R(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var f=(r,t,e)=>(q(r,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(o){if(o.ep)return;o.ep=!0;const s=e(o);fetch(o.href,s)}})();function L(r,t){return(t??document).querySelector(r)}function P(r,t){return(t??document).querySelectorAll(r)}const m=new Map;function C(r){if(m.has(r))return m.get(r);const t=r.length;let e=0,n=0,o=0;const s=[];for(let i=0;i<t;i+=1){const c=r[i],h=r[i+1],p=r[i-1];c==="{"&&h==="{"&&p!=="\\"?(o+=1,o===1&&(n=i),i+=1):c==="}"&&h==="}"&&p!=="\\"&&o&&(o-=1,o===0&&(n>e&&(s.push(Object.freeze({type:"string",start:e,end:n,value:r.slice(e,n)})),e=n),s.push(Object.freeze({type:"part",start:n,end:i+2,value:r.slice(e+2,i).trim()})),i+=1,e=i+1))}return e<t&&s.push(Object.freeze({type:"string",start:e,end:t,value:r.slice(e,t)})),m.set(r,Object.freeze(s)),m.get(r)}const a=new WeakMap,N=new WeakMap;class W{constructor(t,e){this.expression=e,a.set(this,t),t.updateParent("")}get attributeName(){return a.get(this).attr.name}get attributeNamespace(){return a.get(this).attr.namespaceURI}get value(){return N.get(this)}set value(t){N.set(this,t||""),a.get(this).updateParent(t)}get element(){return a.get(this).element}get booleanValue(){return a.get(this).booleanValue}set booleanValue(t){a.get(this).booleanValue=t}}class U{constructor(t,e){f(this,"partList",[]);this.element=t,this.attr=e}get booleanValue(){return this.element.hasAttributeNS(this.attr.namespaceURI,this.attr.name)}set booleanValue(t){if(this.partList.length!==1)throw new DOMException("Operation not supported","NotSupportedError");this.partList[0].value=t?"":null}append(t){this.partList.push(t)}updateParent(t){if(this.partList.length===1&&t===null)this.element.removeAttributeNS(this.attr.namespaceURI,this.attr.name);else{const e=this.partList.map(n=>typeof n=="string"?n:n.value).join("");this.element.setAttributeNS(this.attr.namespaceURI,this.attr.name,e)}}}const l=new WeakMap;class V{constructor(t,e){this.expression=e,l.set(this,[t]),t.textContent=""}get value(){return l.get(this).map(t=>t.textContent).join("")}set value(t){this.replace(t)}get previousSibling(){return l.get(this)[0].previousSibling}get nextSibling(){return l.get(this)[l.get(this).length-1].nextSibling}replace(...t){const e=t.map(n=>typeof n=="string"?new Text(n):n);e.length||e.push(new Text("")),l.get(this)[0].before(...e);for(const n of l.get(this))n.remove();l.set(this,e)}}function z(r){return{processCallback(t,e,n){if(!(typeof n!="object"||!n)){for(const o of e)if(o.expression in n){const s=n[o.expression]??"";r(o,s)}}}}}function F(r,t){r.value=String(t)}const H=z(F);function*B(r){const t=r.ownerDocument.createTreeWalker(r,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null);let e;for(;e=t.nextNode();)if(e instanceof Element&&e.hasAttributes())for(let n=0;n<e.attributes.length;n+=1){const o=e.attributes.item(n);if(o&&o.value.includes("{{")){const s=new U(e,o);for(const i of C(o.value))if(i.type==="string")s.append(i.value);else{const c=new W(s,i.value);s.append(c),yield c}}}else if(e instanceof Text&&e.textContent&&e.textContent.includes("{{")){const n=C(e.textContent);for(let o=0;o<n.length;o+=1){const s=n[o];s.end<e.textContent.length&&e.splitText(s.end),s.type==="part"&&(yield new V(e,s.value));break}}}const k=new WeakMap,A=new WeakMap;class g extends DocumentFragment{constructor(t,e,n=H){var i;super(),Object.getPrototypeOf(this)!==g.prototype&&Object.setPrototypeOf(this,g.prototype),this.appendChild(t.content.cloneNode(!0)),A.set(this,Array.from(B(this))),k.set(this,n);const o=k.get(this),s=A.get(this);o&&s&&((i=o.createCallback)==null||i.call(o,this,s,e),o.processCallback(this,s,e))}update(t){const e=k.get(this),n=A.get(this);e&&n&&e.processCallback(this,n,t)}}const E=r=>(t,e)=>{const n=r.get(t);n.active.tabIndex=-1,n.active=e,n.active.tabIndex=0,n.active.focus()},T=r=>t=>{const e=t.currentTarget;if(r.get("last_scroller")!==e&&r.has(e)){const o=r.get(e);E(r)(e,o.active),r.set("last_scroller",e)}},_=r=>t=>{const e=r.get(t);e.index-=1,e.index<1&&(e.index=0);let n=e.targets[e.index];n&&E(r)(t,n)},K=r=>t=>{const e=r.get(t);e.index+=1,e.index>e.targets.length-1&&(e.index=e.targets.length-1);let n=e.targets[e.index];n&&E(r)(t,n)};var d=(r=>(r.ArrowLeft="ArrowLeft",r.ArrowUp="ArrowUp",r.ArrowRight="ArrowRight",r.ArrowDown="ArrowDown",r))(d||{});const $=getComputedStyle(document.documentElement),O=$.direction==="rtl",j=r=>t=>{const e=t.currentTarget;switch(console.log(t),t.key){case d[O?"ArrowLeft":"ArrowRight"]:case d.ArrowDown:{t.preventDefault(),K(r)(e);break}case d[O?"ArrowRight":"ArrowLeft"]:case d.ArrowUp:{t.preventDefault(),_(r)(e);break}}},Q=r=>{const t=new MutationObserver(e=>{e.filter(n=>n.removedNodes.length>0).forEach(n=>{Array.from(n.removedNodes).filter(o=>o.nodeType===1).forEach(o=>{r.forEach((s,i)=>{if(i==="last_scroller")return;const c=i,h=s;if(o.contains(c)){c.removeEventListener("focusin",T(r)),c.removeEventListener("keydown",j(r)),r.delete(c),h.targets.forEach(x=>x.tabIndex=0);const p=r.size===0,w=r.size===1&&r.has("last_scroller");(p||w)&&(r.clear(),t.disconnect())}})})})});return t},y=new Map,X=({element:r,target:t})=>{const e=t||":scope *",n=r.querySelectorAll(e),[o]=Array.from(n);r.tabIndex=-1,n.forEach(s=>s.tabIndex=-1),o.tabIndex=0,y.set(r,{targets:n,active:o,index:0}),r.addEventListener("focusin",T(y)),r.addEventListener("keydown",j(y)),Q(y).observe(document,{childList:!0,subtree:!0})};const G=document.createElement("template");G.innerHTML=`
      
      `;const b=class extends HTMLButtonElement{constructor(){super(...arguments);f(this,"colorScheme",matchMedia("(prefers-color-scheme: dark)"));f(this,"theme",{value:this.getColorPreference()});f(this,"document",window.document)}connectedCallback(){this.classList.add("theme-toggle"),this.title="Toggles light & dark",this.ariaLive="polite",this.ariaLabel="auto",this.innerHTML=`
      <svg
        class="sun-and-moon"
        aria-hidden="true"
        width="24"
        height="24"
        viewBox="0 0 24 24"
      >
        <mask class="moon" id="moon-mask">
          <rect x="0" y="0" width="100%" height="100%" fill="white" />
          <circle cx="24" cy="10" r="6" fill="black" />
        </mask>
        <circle
          class="sun"
          cx="12"
          cy="12"
          r="6"
          mask="url(#moon-mask)"
          fill="currentColor"
        />
        <g class="sun-beams" stroke="currentColor">
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </g>
      </svg>
    `,this.reflectPreference(),this.colorScheme.addEventListener("change",({matches:e})=>{this.theme.value=e?"darkk":"light",this.setPreference()}),this.onclick=this.onClick}getColorPreference(){const e=b.storageKey,n=localStorage.getItem(e);return n||(this.colorScheme.matches?"dark":"light")}reflectPreference(){const e=this.document.firstElementChild,n=this.document.querySelector("#theme-toggle");e==null||e.setAttribute("data-theme",this.theme.value),n==null||n.setAttribute("aria-label",this.theme.value)}setPreference(){const e=b.storageKey;localStorage.setItem(e,this.theme.value),this.reflectPreference()}onClick(){this.theme.value=this.theme.value==="light"?"dark":"light",this.setPreference()}};let v=b;f(v,"storageKey","theme-preference");customElements.define("et-theme",v,{extends:"button"});const I=L("template#section"),M=L("template#photo"),u=L("dialog#viewer"),J=()=>fetch("./photos.json").then(r=>r.json());I&&M&&u&&J().then(r=>{r.forEach(o=>{const s=o.name.replace("photos/",""),i=new g(I,{name:s});o.contents.forEach(c=>{const[,,h,p]=c.name.split("/"),w=p.replace(".webp",""),x={...c,alt:h,caption:w},D=new g(M,x),S=i.querySelector("ul");S&&S.appendChild(D)}),document.body.appendChild(i)});const t="a";P("ul.scroller").forEach(o=>X({element:o,target:t}));const e=()=>{location.hash="",u.close()};onkeydown=o=>{const s=u.open,i=o.key==="Escape";s&&i&&e()};const n=({target:o})=>{o===u&&e()};u.addEventListener("click",n),P("ul.scroller a").forEach(o=>{const s=`#${o.href.replace(location.origin,"")}`;o.onclick=i=>{i.preventDefault();const c=u.querySelector("img");c&&(c.src=o.href),u.showModal(),location.replace(s)},location.hash===s&&o.click()})});
